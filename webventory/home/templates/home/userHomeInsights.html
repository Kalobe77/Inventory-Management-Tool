{% extends 'home/userHome.html' %}
{% block title %}{{username}}'s Insights | Webventory{% endblock %}
{% block content %}
<div class="row" style="padding-left : .5%;">
    <div class="container-fluid">
        <div class="col s5 center">
            {% if items %}
            <table id="myTable">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Description</th>
                    <th>Quantity</th>
                    <th>Price</th>
                </tr>
                </thead>
                <tbody>
                {% for item in items %}
                {% if user.username in item.get_user_visibility %}
                <tr>
                    <td><a style="color: black" href="/userInsights/{{item.id}}">
                        {{ item.id }}
                    </a></td>
                    <td><a style="color: black" href="/userInsights/{{item.id}}">
                        {{ item.name }}
                    </a></td>
                    <td><a style="color: black" href="/userInsights/{{item.id}}">
                        {{ item.description }}
                    </a></td>
                    <td><a style="color: black" href="/userInsights/{{item.id}}">
                        {{ item.quantity }}
                    </a></td>
                    <td><a style="color: black" href="/userInsights/{{item.id}}">
                        ${{ item.price|floatformat:2 }}
                    </a></td>
                </tr>
                {% endif %}
                {% endfor %}
                </tbody>
            </table>
            {% elif item_range == 20 %}
                <h4>No items in Inventory.</h4>
            {% else %}
                <h4>No Items Left.</h4>
            {% endif %}
            <br>
            <div class="left">
                <span>
                    {% if item_range > 20 %}
                    <a class="waves-effect waves-light btn-large hoverable" style="background-color: #ee6e73;"
                       href="/userInsights/{{item_id}}/{{item_range|add:'-20'}}"><i class="material-icons left">navigate_before</i>Previous</a>
                    {% endif %}
                    {% if items %}
                    <a class="waves-effect waves-light btn-large hoverable" style="background-color: #ee6e73;"
                       href="/userInsights/{{item_id}}/{{item_range|add:'20'}}"><i class="material-icons left">navigate_next</i>Next</a>
                    {% endif %}
                </span>
            </div>
        </div>
    </div>

    <div class="col s4 center" style="padding-right : 5%">
        {% load static %}
        <h2 style="margin-bottom: 40px">{{item.name}} insights</h2>
        {%if item and user.username in item.get_user_visibility %}
        <h3>Price Graph</h3>
        <!-- Gives alt Text Font Size -->
        <span style="font-size: 30px; font-weight: bold;">
            <img src="{% static price_graph %}" alt="No insights found yet!">
        </span>

        <h3>Quantity Graph</h3>
        <!-- Gives alt Text Font Size -->
        <span style="font-size: 30px; font-weight: bold;">
            <img src="{% static quantity_graph %}" alt="No insights found yet!">
    </span>
        {% elif not item %}
            {% include "home/card.html" with msg="Select an item to see your insights." %}
        {% else %}
        <h3>No insights found yet!</h3>
        {% endif %}
    </div>
</div>
{% endblock %}